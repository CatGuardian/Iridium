{"version":3,"sources":["lib/middleware/Express.ts"],"names":["ExpressMiddlewareFactory"],"mappings":"AAKA,kCAAiD,IAAU;IACvDA,MAAMA,CAACA,UAAUA,GAAuBA,EAAEA,GAAwBA,EAAEA,IAA0CA;QAC1G,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YAChB,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;gBAC7B,GAAG,EAAE,cAAa,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;aACnC,CAAC,CAAC;YACH,IAAI,EAAE,CAAC;QACX,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACnB,CAAC,CAACA;AACNA,CAACA;AATD,0CASC,CAAA;AAIA","file":"lib/middleware/Express.js","sourcesContent":["/// <reference path=\"../../_references.d.ts\" />\r\nimport http = require('http');\r\nimport {MiddlewareFactory} from '../Middleware';\r\nimport Core from '../Core';\r\n\r\nexport default function ExpressMiddlewareFactory(core: Core): ExpressMiddleware {\r\n    return function (req: http.ServerRequest, res: http.ServerResponse, next:(err?: Error, route?: String) => void) {\r\n        core.connect().then(function() {\r\n            Object.defineProperty(req, 'db', {\r\n                get: function() { return core; }\r\n            });\r\n            next();\r\n        }).catch(next);\r\n    };\r\n}\r\n\r\nexport interface ExpressMiddleware {\r\n    (req: http.ServerRequest, res: http.ServerResponse, next:(err?: Error, route?: String) => void);\r\n}"],"sourceRoot":"/source/"}