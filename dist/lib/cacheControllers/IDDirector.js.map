{"version":3,"sources":["lib/cacheControllers/IDDirector.ts"],"names":[],"mappings":";AACA,MAAY,OAAO,WAAM,SAAS,CAAC,CAAA;AAEnC;;;;;GAKG;AACH;IACI,KAAK,CAAC,MAAoB;QACtB,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;IACxB,CAAC;IAED,QAAQ,CAAC,MAAoB;QACzB,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,KAAK,UAAU,CAAC;YACpC,MAAM,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;QAC7D,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC;IACtB,CAAC;IAED,UAAU,CAAC,UAAU;QACjB,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC;IAC5B,CAAC;IAED,aAAa,CAAC,UAAU;QACpB,EAAE,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,KAAK,UAAU,CAAC;YACxC,MAAM,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;QACjE,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC;IAC1B,CAAC;AACL,CAAC;AApBY,iBAAS,YAoBrB,CAAA","file":"lib/cacheControllers/IDDirector.js","sourcesContent":["import {CacheDirector} from \"../CacheDirector\";\r\nimport * as MongoDB from \"mongodb\";\r\n\r\n/**\r\n * Caches documents using their _id field as the unique cache key. This\r\n * is useful if you primarily query your documents using their _id field,\r\n * however can be suboptimal (or even a complete waste) if you use different\r\n * types of queries.\r\n */\r\nexport class CacheOnID implements CacheDirector{\r\n    valid(object: { _id: any }) {\r\n        return !!object._id;\r\n    }\r\n\r\n    buildKey(object: { _id: any }) {\r\n        if (object._id._bsontype === \"ObjectID\")\r\n            return new MongoDB.ObjectID(object._id.id).toHexString();\r\n        return object._id;\r\n    }\r\n\r\n    validQuery(conditions) {\r\n        return !!conditions._id;\r\n    }\r\n\r\n    buildQueryKey(conditions) {\r\n        if (conditions._id._bsontype === \"ObjectID\")\r\n            return new MongoDB.ObjectID(conditions._id.id).toHexString();\r\n        return conditions._id;\r\n    }\r\n}"],"sourceRoot":"/source/"}