{"version":3,"sources":["lib/cacheControllers/IDDirector.ts"],"names":["CacheOnID","CacheOnID.constructor","CacheOnID.valid","CacheOnID.buildKey","CacheOnID.validQuery","CacheOnID.buildQueryKey"],"mappings":"AAEA,IAAO,OAAO,WAAW,SAAS,CAAC,CAAC;AAEpC;;;;;GAKG;AACH;IAAAA;IAoBAC,CAACA;IAnBGD,yBAAKA,GAALA,UAAMA,MAAoBA;QACtBE,MAAMA,CAACA,CAACA,CAACA,MAAMA,CAACA,GAAGA,CAACA;IACxBA,CAACA;IAEDF,4BAAQA,GAARA,UAASA,MAAoBA;QACzBG,EAAEA,CAACA,CAACA,MAAMA,CAACA,GAAGA,CAACA,SAASA,IAAIA,UAAUA,CAACA;YACnCA,MAAMA,CAACA,IAAIA,OAAOA,CAACA,QAAQA,CAACA,MAAMA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,WAAWA,EAAEA,CAACA;QAC7DA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,CAACA;IACtBA,CAACA;IAEDH,8BAAUA,GAAVA,UAAWA,UAAUA;QACjBI,MAAMA,CAACA,CAACA,CAACA,UAAUA,CAACA,GAAGA,CAACA;IAC5BA,CAACA;IAEDJ,iCAAaA,GAAbA,UAAcA,UAAUA;QACpBK,EAAEA,CAACA,CAACA,UAAUA,CAACA,GAAGA,CAACA,SAASA,IAAIA,UAAUA,CAACA;YACvCA,MAAMA,CAACA,IAAIA,OAAOA,CAACA,QAAQA,CAACA,UAAUA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,WAAWA,EAAEA,CAACA;QACjEA,MAAMA,CAACA,UAAUA,CAACA,GAAGA,CAACA;IAC1BA,CAACA;IACLL,gBAACA;AAADA,CApBA,AAoBCA,IAAA;AApBY,iBAAS,YAoBrB,CAAA","file":"lib/cacheControllers/IDDirector.js","sourcesContent":["/// <reference path=\"../../_references.d.ts\" />\r\nimport {CacheDirector} from '../CacheDirector';\r\nimport MongoDB = require('mongodb');\r\n\r\n/**\r\n * Caches documents using their _id field as the unique cache key. This\r\n * is useful if you primarily query your documents using their _id field,\r\n * however can be suboptimal (or even a complete waste) if you use different\r\n * types of queries.\r\n */\r\nexport class CacheOnID implements CacheDirector{\r\n    valid(object: { _id: any }) {\r\n        return !!object._id;\r\n    }\r\n\r\n    buildKey(object: { _id: any }) {\r\n        if (object._id._bsontype == 'ObjectID')\r\n            return new MongoDB.ObjectID(object._id.id).toHexString();\r\n        return object._id;\r\n    }\r\n\r\n    validQuery(conditions) {\r\n        return !!conditions._id;\r\n    }\r\n\r\n    buildQueryKey(conditions) {\r\n        if (conditions._id._bsontype == 'ObjectID')\r\n            return new MongoDB.ObjectID(conditions._id.id).toHexString();\r\n        return conditions._id;\r\n    }\r\n}"],"sourceRoot":"/source/"}