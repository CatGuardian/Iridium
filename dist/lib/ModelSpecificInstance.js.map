{"version":3,"sources":["lib/ModelSpecificInstance.ts"],"names":["ModelSpecificInstance"],"mappings":"AAGA,IAAO,IAAI,WAAW,MAAM,CAAC,CAAC;AAC9B,IAAO,CAAC,WAAW,QAAQ,CAAC,CAAC;AAE7B,+BAA0F,KAAkC,EAAE,YAA0E;IACpMA,IAAIA,WAAWA,GAAGA,UAAUA,GAAcA,EAAEA,KAAeA,EAAEA,SAAmBA;QAC5E,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;IAC1D,CAAC,CAACA;IAEFA,IAAIA,CAACA,QAAQA,CAACA,WAAWA,EAAEA,YAAYA,CAACA,CAACA;IAEzCA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,EAACA,UAACA,QAAQA;QACtCA,EAAEA,CAACA,CAACA,QAAQA,KAAKA,KAAKA,CAACA,CAACA,CAACA;YACrBA,MAAMA,CAACA,MAAMA,CAACA,cAAcA,CAACA,WAAWA,CAACA,SAASA,EAAEA,QAAQA,EAAEA;gBAC1DA,GAAGA,EAAEA;oBACD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBAC9D,CAAC;gBACDA,GAAGA,EAAEA,UAAUA,KAAKA;oBAChB,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACjE,CAAC;gBACDA,UAAUA,EAAEA,IAAIA;aACnBA,CAACA,CAACA;QACPA,CAACA;QAEDA,MAAMA,CAACA,cAAcA,CAACA,WAAWA,CAACA,SAASA,EAAEA,QAAQA,EAAEA;YACnDA,GAAGA,EAAEA;gBACD,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACpC,CAAC;YACDA,GAAGA,EAAEA,UAAUA,KAAKA;gBAChB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;YACrC,CAAC;YACDA,UAAUA,EAAEA,IAAIA;SACnBA,CAACA,CAACA;IACPA,CAACA,CAACA,CAACA;IAEHA,MAAMA,CAAMA,WAAWA,CAACA;AAC5BA,CAACA;AAhCD,uCAgCC,CAAA","file":"lib/ModelSpecificInstance.js","sourcesContent":["/// <reference path=\"../_references.d.ts\" />\r\nimport Model from './Model';\r\nimport * as ModelInterfaces from './ModelInterfaces';\r\nimport util = require('util');\r\nimport _ = require('lodash');\r\n\r\nexport default function ModelSpecificInstance<TDocument extends { _id?: any }, TInstance>(model: Model<TDocument, TInstance>, instanceType: ModelInterfaces.InstanceImplementation<TDocument, TInstance>): new (doc: TDocument, isNew?: boolean, isPartial?: boolean) => TInstance {\r\n    var constructor = function (doc: TDocument, isNew?: boolean, isPartial?: boolean) {\r\n        instanceType.call(this, model, doc, isNew, isPartial);\r\n    };\r\n\r\n    util.inherits(constructor, instanceType);\r\n\r\n    _.each(Object.keys(model.schema),(property) => {\r\n        if (property === '_id') {\r\n            return Object.defineProperty(constructor.prototype, property, {\r\n                get: function () {\r\n                    return model.options.identifier.apply(this._modified._id);\r\n                },\r\n                set: function (value) {\r\n                    this._modified._id = model.options.identifier.reverse(value);\r\n                },\r\n                enumerable: true\r\n            });\r\n        }\r\n\r\n        Object.defineProperty(constructor.prototype, property, {\r\n            get: function () {\r\n                return this._modified[property];\r\n            },\r\n            set: function (value) {\r\n                this._modified[property] = value;\r\n            },\r\n            enumerable: true\r\n        });\r\n    });\r\n\r\n    return <any>constructor;\r\n}\r\n"],"sourceRoot":"/source/"}